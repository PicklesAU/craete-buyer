(window.webpackJsonp=window.webpackJsonp||[]).push([[37],{"5mZE":function(t,e,s){"use strict";s.r(e),s.d(e,"pds_tag",(function(){return a}));var i=s("W6Yi"),o=s("V4fj");class n{constructor(t){Object.assign(this,t)}}const a=class{constructor(t){Object(i.g)(this,t),this.inputValue="",this.suggestionArr=[],this.notfoundmessage="No matches found.",this.nooffooter=1,this.pftext="Enter it manually",this.pfallignment="left",this.sftext="Load remaining items",this.sfallignment="center",this.noofitems=4,this.placeholder="",this.type="is-static",this.listMaxWidth="100%",this._suggestionlist=[],this._suggestionlistTag=[],this._objects=[],this._stringObjects=[],this.findMatch=t=>{if(0===t.length)return[];const e=this._suggestionlist.filter((function(e){return e.value.toLowerCase().includes(t.toLowerCase())}));return this.notFound=0===e.length,e},this.onInput=t=>{"is-static"==this.type&&(""!==t.target.value&&this.suggestionlist?(this.inputValue=t.target.value,this.suggestionArr=this.findMatch(this.inputValue),this.showSuggestions=!0):this.showSuggestions=!1)},this.onKeyDown=t=>{switch(t.key){case"ArrowUp":this.suggestionArr.length>0&&(this.selectedSuggestionIndex=void 0===this.selectedSuggestionIndex||0===this.selectedSuggestionIndex?this.suggestionArr.length-1:this.selectedSuggestionIndex-1,this.inputValue=this.suggestionArr[this.selectedSuggestionIndex].value,this.ensureInView(document.querySelector('[id="'+this._id+'"] .typeahead-wrapper'),document.querySelector('[id="'+this._id+'"] [data-index="'+this.selectedSuggestionIndex+'"].typeahead-li')));break;case"ArrowDown":this.suggestionArr.length>0&&(this.selectedSuggestionIndex=void 0===this.selectedSuggestionIndex||this.selectedSuggestionIndex===this.suggestionArr.length-1?0:this.selectedSuggestionIndex+1,this.inputValue=this.suggestionArr[this.selectedSuggestionIndex].value,this.ensureInView(document.querySelector('[id="'+this._id+'"] .typeahead-wrapper'),document.querySelector('[id="'+this._id+'"] [data-index="'+this.selectedSuggestionIndex+'"].typeahead-li')));break;case"Escape":this.showSuggestions=!1,this.selectedSuggestionIndex=void 0;break;case"Tab":void 0!==this.selectedSuggestionIndex?this.onSelect(this.suggestionArr[this.selectedSuggestionIndex].value,this.suggestionArr[this.selectedSuggestionIndex].key):(this.showSuggestions=!1,this.selectedSuggestionIndex=void 0,this.blurEvent.emit(t))}},this.onKeyPress=t=>{"Enter"===t.key&&(t.preventDefault(),void 0!==this.selectedSuggestionIndex&&this.onSelect(this.suggestionArr[this.selectedSuggestionIndex].value,this.suggestionArr[this.selectedSuggestionIndex].key))},this.onSelect=(t,e)=>{console.log(t),this.selectedSuggestionIndex=void 0,this.showSuggestions=!1;const s=document.querySelector('[id="'+this._id+'"]');s.querySelectorAll('[data-id="'+e+'"]')[0].classList.remove("is-hidden"),this.inputValue="",s.querySelector('input[id="'+this.uid+'"]').value="",this.listselected.emit(e),this._suggestionlist=this.removeItem(e)},this.getSuggestionElement=(t,e,s)=>{const o=void 0!==this.selectedSuggestionIndex&&t===this.suggestionArr[this.selectedSuggestionIndex].value;return Object(i.f)("li",{class:"typeahead-li "+(o?"typeahead-selected":""),onClick:()=>this.onSelect(t,e),"data-index":s},t)},this._id="auto_"+Object(o.b)(),this.blurEvent=Object(i.d)(this,"blurEvent",7),this.pfclick=Object(i.d)(this,"tagpfclick",7),this.sfclick=Object(i.d)(this,"tagsfclick",7),this.listselected=Object(i.d)(this,"tagadded",7),this.tagremoved=Object(i.d)(this,"tagremoved",7)}validateSuggestionlist(t){if(this.suggestionlist){if("is-dynamic"===this.type&&(this._suggestionlist=[],this._suggestionlistTag=[],this.inputValue=""),this._objects=JSON.parse(t),"string"==typeof this._objects[0]||"number"==typeof this._objects[0]){this._stringObjects=JSON.parse(t),this._stringObjects.sort();for(const t of this._stringObjects){const e=new n;e.key=t,e.value=t,this._suggestionlist.push(e),this._suggestionlistTag.push(e)}}else{for(const t of this._objects){const e=new n,s=Object.keys(t);for(const i of s)"isSelected"===i?e.isSelected=t[i]:i===this.keyfield?e.key=t[i]:i===this.valuefield&&(e.value=t[i]);this._suggestionlist.push(e),this._suggestionlistTag.push(e)}for(const t of this._suggestionlist)t.isSelected&&(this._suggestionlist=this.removeItem(t.key))}"is-dynamic"===this.type&&(this.suggestionArr=this._suggestionlist,this.showSuggestions=!0)}else this.suggestionArr=[],this.showSuggestions=!1}handleWindowClick(t){this.element.contains(t.target)||(this.showSuggestions=!1,this.selectedSuggestionIndex=void 0,this.blurEvent.emit(t))}componentWillLoad(){this.suggestionlist?this.validateSuggestionlist(this.suggestionlist):this.suggestionlistapi&&fetch(this.suggestionlistapi).then(t=>t.json()).then(t=>this.suggestionlist=JSON.stringify(t))}ensureInView(t,e){const s=t.scrollTop,i=s+t.clientHeight,o=e.offsetTop,n=o+e.clientHeight;o<s?t.scrollTop-=s-o:n>i&&(t.scrollTop+=n-i)}removeItem(t){if(0===t.length)return[];const e=this._suggestionlist.filter((function(e){return e.key.toLowerCase()!==t.toLowerCase()}));return 0===e.length?[]:e}addItem(t,e){const s=new n;s.key=t,s.value=e,this._suggestionlist.push(s),this._suggestionlist.sort((t,e)=>t.value>e.value?1:-1)}removeSelectedTag(t,e){document.querySelector('[id="'+this._id+'"]').querySelectorAll('[data-id="'+t+'"]')[0].classList.add("is-hidden"),this.tagremoved.emit(t),this.addItem(t,e)}componentDidLoad(){const t=document.querySelector('[id="'+this.uid+'"]');if(t.setAttribute("autocomplete","off"),this.showTagIcon){const e=document.querySelector('[id="'+this._id+'"] .tag-icon');t.parentNode.appendChild(e)}const e=document.querySelector('[id="'+this._id+'"]');for(const s of this._suggestionlistTag)s.isSelected&&e.querySelectorAll('[data-id="'+s.key+'"]')[0].classList.remove("is-hidden")}handlePFClick(){this.showSuggestions=!1,this.selectedSuggestionIndex=void 0,this.pfclick.emit()}handleSFClick(){this.showSuggestions=!1,this.selectedSuggestionIndex=void 0,this.sfclick.emit()}render(){return Object(i.f)("div",{class:{taginput:!0,control:!0},id:this._id},Object(i.f)("div",{class:{"taginput-container":!0,"is-focusable":!0,[this.size]:!!this.size}},this._suggestionlistTag.map(t=>Object(i.f)("span",{class:{tag:!0,"is-hidden":!0,[this.color]:!!this.color,[this.size]:!!this.size},"data-id":t.key},t.value,this.disabled?"":Object(i.f)("a",{role:"button",class:"delete is-small",onClick:()=>this.removeSelectedTag(t.key,t.value)}))),Object(i.f)("div",{class:{"typeahead-div":!0,"is-loading":this.showSuggestions,autocomplete:!0,control:!0,"no-tag-icon":!this.showTagIcon},id:this._id},Object(i.f)("pds-input",{type:"text",uid:this.uid,name:this.name,color:this.color,size:this.size,placeholder:this.placeholder,value:this.inputValue,onInput:t=>this.onInput(t),onKeyDown:t=>this.onKeyDown(t),onKeyPress:t=>this.onKeyPress(t),spellCheck:!1,rounded:this.rounded,disabled:this.disabled}),this.showTagIcon?Object(i.f)("span",{class:"tag-icon"},Object(i.f)("i",{class:"pds-icon pds-icon-tag"})):"",Object(i.f)("div",{class:"typeahead-list",hidden:!this.showSuggestions,style:{"max-width":this.listMaxWidth}},Object(i.f)("div",{class:"typeahead-wrapper",style:{"max-height":34*this.noofitems+"px"}},Object(i.f)("ul",{class:"typeahead-ul",role:"listbox"},this.suggestionArr.map((t,e)=>this.getSuggestionElement(t.value,t.key,e)))),Object(i.f)("div",{class:"typeahead-notfound",hidden:!this.notFound},this.notfoundmessage),Object(i.f)("div",{class:"typeahead-footer",hidden:!this.showSuggestions||0===this.nooffooter},2===this.nooffooter?Object(i.f)("div",{class:"secondary-footer",style:{"text-align":this.sfallignment}},Object(i.f)("a",{href:this.sflink,onClick:()=>this.handleSFClick()},this.sftext)):"",this.nooffooter>0?Object(i.f)("div",{class:"primary-footer",style:{"text-align":this.pfallignment}},Object(i.f)("a",{href:this.pflink,onClick:()=>this.handlePFClick()},this.pftext)):"")))))}get element(){return Object(i.e)(this)}static get watchers(){return{suggestionlist:["validateSuggestionlist"]}}static get style(){return'@-webkit-keyframes spinAround{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(359deg);transform:rotate(359deg)}}@keyframes spinAround{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(359deg);transform:rotate(359deg)}}pds-tag .taginput .taginput-container.is-focusable{padding-bottom:calc(.275em - 1px);padding-top:calc(.275em - 1px);padding-left:2px;padding-right:2px;-ms-flex-align:center;align-items:center;display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap;-ms-flex-pack:start;justify-content:flex-start;height:auto;cursor:text;max-width:100%;width:100%;background-color:#fff;border-color:#b5b5b5;border-radius:4px;color:#242424;-webkit-appearance:none;border:1px solid #b5b5b5;font-size:1rem;line-height:1.5;position:relative;vertical-align:top}pds-tag .taginput .taginput-container.is-focusable .autocomplete{width:100%}pds-tag .taginput .taginput-container.is-focusable:active,pds-tag .taginput .taginput-container.is-focusable:focus{border-color:#004c93;-webkit-box-shadow:0 0 0 .125em rgba(0,78,149,.25);box-shadow:0 0 0 .125em rgba(0,78,149,.25)}pds-tag input{-webkit-box-shadow:none!important;box-shadow:none!important;border:none!important;padding-left:35px!important}pds-tag .no-tag-icon input{padding-left:5px!important}pds-tag .tag-icon{color:#b5b5b5;height:1.7em;pointer-events:none;position:absolute;top:3px;width:2.25em;left:0;z-index:4;-ms-flex-align:center;align-items:center;display:-ms-inline-flexbox;display:inline-flex;-ms-flex-pack:center;justify-content:center}pds-tag .input:active+.tag-icon,pds-tag .input:focus+.tag-icon{color:#7a7a7a}pds-tag i.pds-icon.pds-icon-tag{font-size:1.75rem}pds-tag .tag{font-size:1rem!important;margin-right:5px;margin-top:2px;margin-bottom:2px}pds-tag .tag.is-small{font-size:.75rem!important}pds-tag .tag.is-medium{font-size:1.25rem!important}pds-tag .tag.is-large{font-size:1.5rem!important}pds-tag .is-hidden.is-hidden{display:none}pds-tag .typeahead-div{position:relative}pds-tag .typeahead-input{width:100%}pds-tag .typeahead-list{list-style:none;border:1px solid #b5b5b5;background-color:#fff;position:absolute;width:100%;margin:0;padding:0;border-radius:4px;z-index:99}pds-tag .typeahead-wrapper{max-height:135px;overflow-y:auto;border-bottom:none;width:100%}pds-tag .typeahead-wrapper::-webkit-scrollbar{width:6px;background-color:transparent}pds-tag .typeahead-wrapper::-webkit-scrollbar-thumb{background-color:#b5b5b5;border-radius:10px}pds-tag .typeahead-notfound{list-style:none;color:#121212;font-size:.875rem;line-height:1.5;padding:.375rem 1rem}pds-tag .typeahead-footer{border-top:1px solid #b5b5b5;width:100%;-webkit-box-shadow:0 .5em 1em -.125em rgba(10,10,10,.1),0 0 0 1px rgba(10,10,10,.02);box-shadow:0 .5em 1em -.125em rgba(10,10,10,.1),0 0 0 1px rgba(10,10,10,.02);list-style:none;color:#121212;position:relative}pds-tag .primary-footer,pds-tag .secondary-footer{font-size:.875rem;line-height:1.5;padding:.375rem 1rem}pds-tag .primary-footer{border-top:1px solid #b5b5b5}pds-tag .typeahead-li{color:#242424;display:block;font-size:.875rem;line-height:1.5;padding:.375rem 1rem;position:relative;text-align:left;width:100%}pds-tag .typeahead-li:not(:first-child){border-top:1px solid #dbdbdb}pds-tag .typeahead-li:hover{cursor:pointer}pds-tag .typeahead-li:hover,pds-tag .typeahead-selected{background-color:#f5f5f5;color:#0a0a0a}pds-tag .typeahead-div.is-loading:after{position:absolute!important;right:.625em;top:.625em;z-index:4;-webkit-animation:spinAround .5s linear infinite;animation:spinAround .5s linear infinite;border:2px solid #dbdbdb;border-radius:290486px;border-right-color:transparent;border-top-color:transparent;content:"";display:block;height:1em;width:1em}pds-tag .typeahead-div.is-loading input[type=text]{padding-right:30px}'}}}}]);